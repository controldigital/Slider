class Slider{constructor(a,b={}){if(a)'string'==typeof a?this.slider=document.querySelector(a):(a instanceof HTMLElement||1===a.nodeType)&&(this.slider=a);else return;if(b&&'object'==typeof b&&(this.options=b),this.data={activeBreakpoint:null,animating:!1,breakpoints:[],breakpointSettings:[],currentSlide:0,currentPosition:0,dotsList:null,hovering:!1,interval:null,touchStart:null,touchMove:null,touchEnd:null,touchDistance:null},this.defaults={amountOfSlides:1,autoplay:!1,autoplayMode:'slide',autoplaySpeed:6e3,activeSlideClass:'active',dots:!1,easing:'cubic-bezier(0.67, 0, 0.34, 1)',forceSlideWidth:!0,prevButton:document.getElementById('slider-prev'),nextButton:document.getElementById('slider-next'),pauseOnHover:!0,parallax:!1,parallaxIntensity:2,slidesToScroll:1,scroll:!1,scrollIntensity:5,touch:!0,touchTreshold:100,transitionSpeed:500,responsive:[]},null!==this.slider){if(this.slider.children.length)this.slides=this.slider.children;else return;this.init()}}get currentSlide(){var a=[];for(let b=this.data.currentSlide;b<this.data.currentSlide+this.defaults.amountOfSlides;b+=1)a.push(this.slides[b]);return a}set currentSlide(a){if('number'==typeof a&&0<=a&&a<=this.slides.length-this.defaults.amountOfSlides){this.slides[a];this.data.currentSlide=a,this.moveToCurrentSlide()}}init(){this.overwriteOptions(this.options),this.registerBreakpoints(),this.checkResponsive(),this.setActiveSlides(),this.addFlexToRails(),this.setSliderWidth(),this.setSlideWidth(),this.setSlideIndex(),this.setActiveSlides(),this.selectParallaxElements(),this.setParallaxPosition(),this.initEvents(),this.startInterval()}update(a){a&&'object'==typeof a&&(this.options=a,this.init())}overwriteOptions(a){for(let b in this.defaults)this.defaults.hasOwnProperty(b)&&(void 0!==a[b]&&(this.defaults[b]=a[b]),void 0!==this.slider.dataset[b]&&(this.defaults[b]=parseInt(this.slider.dataset[b],10)))}eachSlide(a){if(a&&'function'==typeof a)for(let c,b=0;b<this.slides.length;b+=1)c=this.slides[b],a(c,b)}registerBreakpoints(){var a,b,d,c=this.defaults.responsive;if('object'==typeof c&&c.length)for(a in c)if(d=this.data.breakpoints.length-1,c.hasOwnProperty(a)){for(b=c[a].breakpoint;0<=d;)this.data.breakpoints[d]&&this.data.breakpoints[d]===b&&this.data.breakpoints.splice(d,1),d--;this.data.breakpoints.push(c[a].breakpoint),this.data.breakpointSettings.push(c[a].options)}}checkResponsive(){var b,c,a=window.innerWidth;if(this.defaults.responsive&&this.defaults.responsive.length&&null!==this.defaults.responsive){c=null;for(let d=0;d<this.data.breakpoints.length;d+=1)b=this.data.breakpoints[d],a<=b&&(c=d);null===c?null!==this.data.activeBreakpoint&&(this.data.activeBreakpoint=null,this.overwriteOptions(this.options)):null===this.data.activeBreakpoint?(this.data.activeBreakpoint=this.data.breakpoints[c],this.overwriteOptions(this.data.breakpointSettings[c])):c!==this.data.activeBreakpoint&&(this.data.activeBreakpoint=this.data.breakpoints[c],this.overwriteOptions(this.data.breakpointSettings[c]))}}checkIfInView(){this.data.activeSlides=[];for(let a=this.slides.length-1;-1<a;a--){let b=this.sliderWidth/2,c=this.getSlidePosition(a);if(0<=c.left&&c.right<=this.sliderWidth){let d=this.slides[a];this.data.currentSlide=a,this.data.activeSlides.push(d),this.addCurrentClass(d)}else{let d=this.slides[a];this.removeCurrentClass(d)}}}setSliderWidth(){null!==this.slider.parentNode&&(this.sliderWidth=this.slider.parentNode.offsetWidth,this.railsWidth=this.sliderWidth/this.defaults.amountOfSlides*this.slides.length,this.slider.style.width=`${this.railsWidth}px`)}setSlideWidth(a){this.slideWidth=a?a:this.sliderWidth/this.defaults.amountOfSlides,this.slideWidthPercentage=100*(this.slideWidth/this.sliderWidth),!1!==this.defaults.forceSlideWidth&&this.eachSlide(b=>{b.style.width=`${this.slideWidth}px`})}setSlideIndex(){this.eachSlide((a,b)=>{if(a.hasAttribute('data-index')){let c=a.getAttribute('data-index');a.style.webkitBoxOrdinalGroup=c+1,a.style.msFlexOrder=c,a.style.order=c}else a.setAttribute('data-index',b),a.style.webkitOrdinalGroup=b+1,a.style.msFlexOrder=b,a.style.order=b})}initEvents(){window.addEventListener('resize',()=>{this.checkResponsive(),this.sliderWidth=this.slider.offsetWidth,this.setSliderWidth(),this.setSlideWidth(),this.setParallaxPosition(),this.moveToCurrentSlide()},!1),(!0===this.defaults.pauseOnHover||1===this.defaults.pauseOnHover)&&(this.slider.addEventListener('mouseover',()=>{!1===this.data.hovering&&this.stopInterval(),this.data.hovering=!0},!1),this.slider.addEventListener('mouseout',()=>{!0===this.data.hovering&&this.startInterval(),this.data.hovering=!1},!1)),(!0===this.defaults.scroll||1===this.defaults.scroll)&&this.slider.addEventListener('wheel',a=>{var b=a.wheelDeltaY||1.5*-a.deltaY,c=b/this.defaults.scrollIntensity,d=this.data.currentPosition-c,f=this.getSliderPosition().right;0<b?f<this.sliderWidth+10?(this.moveTo(-this.railsWidth+this.sliderWidth),this.isParallaxActive()&&this.moveParallax(-this.railsWidth+this.sliderWidth)):(this.moveTo(d),this.isParallaxActive()&&this.moveParallax(d),Math.abs(this.getSliderPosition().left)>this.slideWidth/2+this.slideWidth*this.data.currentSlide&&(this.data.currentSlide+=1,this.setActiveSlides())):0>b&&(d>-10?(this.moveTo(0),this.isParallaxActive()&&this.moveParallax(0)):(this.moveTo(d),this.isParallaxActive()&&this.moveParallax(d),Math.abs(this.getSliderPosition().left)<this.slideWidth/2+this.slideWidth*(this.data.currentSlide-1)&&(this.data.currentSlide-=1,this.setActiveSlides()))),a.preventDefault()},!1),(!0===this.defaults.touch||1===this.defaults.touch)&&'ontouchstart'in window&&(this.slider.addEventListener('touchstart',a=>{this.data.touchStart=a.changedTouches[0].screenX,this.data.touchMove=null,this.data.touchEnd=null,this.data.touchDistance=null},{passive:!1}),this.slider.addEventListener('touchmove',a=>{var b=(this.defaults.touchIntensity+10)/10,c=this.getSliderPosition().right;this.data.touchMove=a.changedTouches[0].screenX,this.data.touchDistance=this.data.currentSlide*this.slideWidth+(this.data.touchStart-this.data.touchMove),!1===this.data.animating&&(0<this.data.touchDistance&&this.sliderWidth<=c&&(this.moveTo(-this.data.touchDistance),this.isParallaxActive()&&this.moveParallax(-this.data.touchDistance)),this.stopInterval())},{passive:!1}),this.slider.addEventListener('touchend',a=>{this.data.touchEnd=a.changedTouches[0].screenX;var b=Math.abs(this.data.currentSlide*this.slideWidth-this.data.touchDistance);!1===this.data.animating&&(b>(this.defaults.touchTreshold||this.slideWidth/2)&&null!==this.data.touchDistance?this.data.touchDistance>this.data.currentSlide*this.slideWidth?this.moveSlider(this.defaults.slidesToScroll,1):this.data.touchDistance<this.data.currentSlide*this.slideWidth&&this.moveSlider(this.defaults.slidesToScroll,0):this.moveToCurrentSlide(),this.startInterval())},{passive:!1})),null!==this.defaults.prevButton&&this.defaults.prevButton.addEventListener('click',a=>{!1===this.data.animating&&this.moveSlider(this.defaults.slidesToScroll,0),(!0===this.defaults.autoplay||1===this.defaults.autoplay)&&this.stopInterval(!0),a.preventDefault()},!1),null!==this.defaults.nextButton&&this.defaults.nextButton.addEventListener('click',a=>{!1===this.data.animating&&this.moveSlider(this.defaults.slidesToScroll,1),(!0===this.defaults.autoplay||1===this.defaults.autoplay)&&this.stopInterval(!0),a.preventDefault()},!1)}addTransition(a,b){if(a){var c;c=b&&'string'==typeof b?b:'transform',a.style.webkitTransition=`${c} ${this.defaults.transitionSpeed}ms ${this.defaults.easing}`,a.style.transition=`${c} ${this.defaults.transitionSpeed}ms ${this.defaults.easing}`}}removeTransition(a){a&&setTimeout(()=>{a.style.webkitTransition='',a.style.transition='',this.data.animating=!1},this.defaults.transitionSpeed)}setActiveSlides(){this.eachSlide(a=>{this.removeCurrentClass(a)});for(let b,a=this.data.currentSlide;a<this.data.currentSlide+this.defaults.amountOfSlides;a++)b=this.slides[a],this.addCurrentClass(b)}addCurrentClass(a){a&&(a.setAttribute('aria-hidden',!1),a.classList.add(this.defaults.activeSlideClass))}removeCurrentClass(a){a&&(a.setAttribute('aria-hidden',!0),a.classList.remove(this.defaults.activeSlideClass))}addFlexToRails(){this.slider.style.display='-webkit-flex',this.slider.style.display='-ms-flexbox',this.slider.style.display='flex',this.slider.style.webkitAlignItems='stretch',this.slider.style.alignItems='stretch'}isParallaxActive(){return'boolean'==typeof this.defaults.parallax&&!0===this.defaults.parallax||'number'==typeof this.defaults.parallax&&1===this.defaults.parallax||'string'==typeof this.defaults.parallax}selectParallaxElements(){'string'==typeof this.defaults.parallax?this.eachSlide(a=>{var b=a.querySelector(this.defaults.parallax);a.parallaxElement=b?b:a.firstElementChild}):'boolean'==typeof this.defaults.parallax&&!0===this.defaults.parallax&&this.eachSlide(a=>{a.parallaxElement=a.firstElementChild})}setParallaxPosition(){this.slideWidth=this.sliderWidth/this.defaults.amountOfSlides,this.isParallaxActive()&&(1===this.defaults.amountOfSlides?this.eachSlide((a,b)=>{a.parallaxElement.style.right=this.slideWidth/this.defaults.parallaxIntensity*b+'px',a.parallaxElement.style.width=this.slideWidth+'px'}):this.eachSlide((a,b)=>{a.parallaxElement.style.right=0,a.parallaxElement.style.width=this.slideWidth+this.slideWidth/this.defaults.parallaxIntensity*b+'px'}))}getSliderPosition(){let a=this.slider.getBoundingClientRect();return a}getSlidePosition(a){if('number'==typeof a){let b=this.slides[a],c=b.getBoundingClientRect();return c}}getCurrentSlidePosition(){let a=this.slides[this.data.currentSlide],b=a.getBoundingClientRect();return b}getSlide(a){if('number'==typeof a&&0<=a&&a<this.slides.length){let b=this.slides[a];return b}}moveTo(a){this.data.currentPosition=a,this.slider.style.webkitTransform=`translate3d(${this.data.currentPosition}px, 0, 0)`,this.slider.style.transform=`translate3d(${this.data.currentPosition}px, 0, 0)`}animateTo(a){this.data.currentPosition=a,this.addTransition(this.slider),this.slider.style.webkitTransform=`translate3d(${this.data.currentPosition}px, 0, 0)`,this.slider.style.transform=`translate3d(${this.data.currentPosition}px, 0, 0)`,this.removeTransition(this.slider)}moveParallax(a){var b=-a/this.defaults.parallaxIntensity;this.eachSlide(c=>{c.parallaxElement.style.webkitTransform=`translate3d(${b}px, 0, 0)`,c.parallaxElement.style.transform=`translate3d(${b}px, 0, 0)`})}animateParallax(a){var b=-a/this.defaults.parallaxIntensity;this.eachSlide(c=>{this.addTransition(c.parallaxElement),c.parallaxElement.style.webkitTransform=`translate3d(${b}px, 0, 0)`,c.parallaxElement.style.transform=`translate3d(${b}px, 0, 0)`,this.removeTransition(c.parallaxElement)})}moveToCurrentSlide(){let a=this.getSliderPosition().left-this.getCurrentSlidePosition().left;this.animateTo(a),this.isParallaxActive()&&this.animateParallax(a),this.setActiveSlides()}moveSlider(a,b){if(a&&!1===this.data.animating){this.data.animating=!0;var c=this.data.currentSlide,d=this.defaults.amountOfSlides,f=this.slides.length;1===b||!0===b?c+d-1+a<f?this.data.currentSlide+=a:c===f-d?this.data.currentSlide=0:c+d-1+a>=f&&(this.data.currentSlide=f-d):(0===b||!1===b)&&(0<c-a?this.data.currentSlide-=a:0===c?this.data.currentSlide=f-1-d+1:0>=c-a&&(this.data.currentSlide=0)),setTimeout(()=>{this.data.animating=!1},this.defaults.transitionSpeed)}this.moveToCurrentSlide()}animationState(){!1===this.data.animating&&(this.data.animating=!0,setTimeout(()=>{this.data.animating=!1},this.defaults.transitionSpeed))}startInterval(){(!0===this.defaults.autoplay||1===this.defaults.autoplay)&&(this.data.interval=setInterval(()=>{this.moveSlider(this.defaults.slidesToScroll,1)},this.defaults.autoplaySpeed))}stopInterval(a){clearInterval(this.data.interval),!0===a&&this.startInterval()}}
